openapi: 3.0.3
info:
  title: Academic Management API
  description: 'API for managing users, roles, students, teachers, courses, schedules, attendance, activities, notices, and reports. Generated from provided SRS and ER diagram. Assumes JWT Bearer authentication, ISO 8601 timestamps, and camelCase property naming.'
  version: 1.0.0
  contact:
    name: API Support
    email: support@example.com

servers:
  - url: http://localhost:3000/
    description: Local Server
  - url: https://api.example.com/v1
    description: Primary server
tags:
  - name: Authentication
    description: Login and password operations
  - name: Users
    description: User management and profiles
  - name: Semesters
    description: Semester management
  - name: Students
    description: Student records and enrollment
  - name: Teachers
    description: Teacher records
  - name: Courses
    description: Courses and course details
  - name: CourseSchedules
    description: Course scheduling
  - name: Attendance
    description: Attendance records
  - name: Activities
    description: Activities and logs
  - name: Notices
    description: Notices and attachments
  - name: Reports
    description: Reports generation
security:
  - bearerAuth: []
paths:
  /auth/me:
    get:
      tags: [Authentication]
      summary: Get current user data
      security:
        - bearerAuth: []
      responses:
        '200':
          description: user objects
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/MeResponse'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /auth/profile:
    get:
      tags: [Authentication]
      summary: Get current user profile
      security:
        - bearerAuth: []
      responses:
        '200':
          description: user profile objects
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Student'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /auth/roles:
    get:
      tags: [Authentication]
      summary: List users roles
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Array of user roles objects
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/RoleData'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /user:
    get:
      tags: [Users]
      summary: List users
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Array of user objects
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: string
                  limit:
                    type: string
                  offset:
                    type: string
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/UserData'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [Users]
      summary: Create user
      description: Register a new user
      security:
        - bearerAuth: []

      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserDTO'
            example:
              email: alice@example.com
              password: P@ssw0rd!
              fullName: Alice Roberts
              designation: student
              role: ''
      responses:
        '201':
          description: User created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserData'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /user/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    get:
      tags: [Users]
      summary: Get user by ID
      security:
        - bearerAuth: []
      responses:
        '200':
          description: User data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserData'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    patch:
      tags: [Users]
      summary: Update user
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/UserUpdateDTO'
            example:
              fullName: Alice R.
              title: Prof.
      responses:
        '202':
          description: User updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UserData'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Users]
      summary: Delete user
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Deleted
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /student:
    get:
      tags: [Students]
      summary: List students
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Array of students
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: number
                    default: 1
                  limit:
                    type: number
                    default: 10
                  offset:
                    type: number
                    default: 0
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/Student'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [Students]
      summary: Create student record
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StudentCreateDTO'
            example:
              email: 'student01@school.edu'
              fullName: 'John Doe'
              designation: 'STUDENT'
              password: 'P@ssw0rd!'
              enrolmentDate: '2024-01-10T00:00:00.000Z'
              status: 'ACTIVE'
              session: '2024-2025'
              graduationYear: 2028
              currentSemesterId: '5e4b9e56-1ec3-4a1a-a1f8-81e7e9a8b2fa'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Student'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /student/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    get:
      tags: [Students]
      summary: Get student
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Student record
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Student'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

    patch:
      tags: [Students]
      summary: Update student
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/StudentUpdateDTO'
            example:
              fullName: 'John Doe'
              enrolmentDate: '2024-01-10T00:00:00.000Z'
              status: 'GRADUATED'
              session: '2024-2025'
              graduationYear: 2028
              currentSemesterId: '5e4b9e56-1ec3-4a1a-a1f8-81e7e9a8b2fa'
      responses:
        '202':
          description: Student's updated data
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Student'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Students]
      summary: Delete user
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Deleted
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /teacher:
    get:
      tags: [Teachers]
      summary: List teachers
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Array of teachers
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: number
                    default: 1
                  limit:
                    type: number
                    default: 10
                  offset:
                    type: number
                    default: 0
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/Teacher'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [Teachers]
      summary: Create teacher
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeacherCreateDTO'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Teacher'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /teacher/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    get:
      tags: [Teachers]
      summary: Get single teacher
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Student record
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Teacher'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

    patch:
      tags: [Teachers]
      summary: Update teacher
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/TeacherUpdateDTO'
            example:
              status: graduated
      responses:
        '202':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Student'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Teachers]
      summary: Delete teacher
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Deleted
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /semester:
    get:
      tags: [Semesters]
      summary: List semesters
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Array of semesters
          content:
            application/json:
              schema:
                type: array
                items:
                  $ref: '#/components/schemas/Semester'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [Semesters]
      summary: Create semester
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/SemesterCreateDTO'
            example:
              name: Fall-2023
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Semester'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /semester/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string

    get:
      tags: [Semesters]
      summary: Get single semester
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Student record
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Semester'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    patch:
      tags: [Semesters]
      summary: Update semester
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseCreateDTO'
            example:
              status: graduated
      responses:
        '202':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Student'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Semesters]
      summary: Delete semester
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Deleted
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /course:
    get:
      tags: [Courses]
      summary: List courses
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Array of courses
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: number
                    default: 1
                  limit:
                    type: number
                    default: 10
                  offset:
                    type: number
                    default: 0
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/Courses'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [Courses]
      summary: Create course
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseCreateDTO'
            example:
              semesterId: a1593306-7fd2-453b-a34c-79c165a9380b
              code: CS101
              name: Introduction to Computer Science
              description: Basic concepts of computing
              credits: 3
      responses:
        '201':
          description: New created course
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Courses'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /course/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    get:
      tags: [Courses]
      summary: Get course
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Course
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Courses'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    patch:
      tags: [Courses]
      summary: Update course
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseUpdateDTO'
            example:
              semesterId: a1593306-7fd2-453b-a34c-79c165a9380b
              code: CS101
              name: Introduction to Computer Science
              description: Basic concepts of computing
              credits: 3
      responses:
        '202':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Courses'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Courses]
      summary: Delete course
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Deleted
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /course/{courseId}/schedule:
    parameters:
      - name: courseId
        in: path
        required: true
        schema:
          type: string
    get:
      tags: [CourseSchedules]
      summary: Get schedules for a course
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Array of schedules
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: number
                    default: 1
                  limit:
                    type: number
                    default: 10
                  offset:
                    type: number
                    default: 0
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/CourseSchedule'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [CourseSchedules]
      summary: Create course schedule
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseScheduleCreateDTO'

      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CourseSchedule'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /course/{courseId}/schedule/{id}:
    parameters:
      - name: courseId
        in: path
        required: true
        schema:
          type: string
      - name: id
        in: path
        required: true
        schema:
          type: string
    get:
      tags: [CourseSchedules]
      summary: Get single schedules
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Array of schedules
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CourseSchedule'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    patch:
      tags: [CourseSchedules]
      summary: Create course schedule
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/CourseScheduleUpdateDTO'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/CourseSchedule'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [CourseSchedules]
      summary: Create course schedule
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Deleted
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /attendance:
    get:
      tags: [Attendance]
      summary: List attendance records
      security:
        - bearerAuth: []
      parameters:
        - in: query
          name: studentId
          schema:
            type: string
          description: Filter by student id
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'

      responses:
        '200':
          description: Array of attendance records
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: number
                    default: 1
                  limit:
                    type: number
                    default: 10
                  offset:
                    type: number
                    default: 0
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/AttendanceRecord'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [Attendance]
      summary: Create attendance record
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AttendanceCreateDTO'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AttendanceRecord'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /attendance/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string
    get:
      tags: [Attendance]
      summary: Get attendance
      security:
        - bearerAuth: []
      responses:
        '200':
          description: Attendance record
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AttendanceRecord'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

    patch:
      tags: [Attendance]
      summary: Update attendance
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/AttendanceUpdateDTO'
      responses:
        '202':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/AttendanceRecord'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Attendance]
      summary: Delete attendance
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Deleted
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /activity:
    get:
      tags: [Activities]
      summary: List activities
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Array of activities
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: number
                    default: 1
                  limit:
                    type: number
                    default: 10
                  offset:
                    type: number
                    default: 0
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/Activity'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [Activities]
      summary: Create activity
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ActivityCreateDTO'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Activity'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /activity/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string

    get:
      tags: [Activities]
      summary: Get single activity
      security:
        - bearerAuth: []
      responses:
        '200':
          description: activity record
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Activity'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    patch:
      tags: [Activities]
      summary: Update activity
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ActivityUpdateDTO'
      responses:
        '202':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Activity'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Activities]
      summary: Delete activity
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Deleted
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /notice:
    get:
      tags: [Notices]
      summary: List notices
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Array of notices
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: number
                    default: 1
                  limit:
                    type: number
                    default: 10
                  offset:
                    type: number
                    default: 0
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/Notice'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [Notices]
      summary: Create notice
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NoticeCreateDTO'
      responses:
        '201':
          description: Created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notice'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
  /notice/{id}:
    parameters:
      - name: id
        in: path
        required: true
        schema:
          type: string

    get:
      tags: [Notices]
      summary: Get single notice
      security:
        - bearerAuth: []
      responses:
        '200':
          description: notice record
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notice'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    patch:
      tags: [Notices]
      summary: Update notice
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/NoticeUpdateDTO'
      responses:
        '202':
          description: Updated
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Notice'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    delete:
      tags: [Notices]
      summary: Delete notice
      security:
        - bearerAuth: []
      responses:
        '204':
          description: Deleted
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

  /report:
    get:
      tags: [Reports]
      summary: List reports
      security:
        - bearerAuth: []
      parameters:
        - $ref: '#/components/parameters/LimitParam'
        - $ref: '#/components/parameters/OffsetParam'
      responses:
        '200':
          description: Array of reports
          content:
            application/json:
              schema:
                type: object
                properties:
                  total:
                    type: number
                    default: 1
                  limit:
                    type: number
                    default: 10
                  offset:
                    type: number
                    default: 0
                  results:
                    type: array
                    items:
                      $ref: '#/components/schemas/Report'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'
    post:
      tags: [Reports]
      summary: Generate report
      description: Request generation of a report
      security:
        - bearerAuth: []
      requestBody:
        required: true
        content:
          application/json:
            schema:
              $ref: '#/components/schemas/ReportCreateDTO'
      responses:
        '201':
          description: Report created
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/Report'
        '400':
          $ref: '#/components/responses/BadRequest'
        '401':
          $ref: '#/components/responses/Unauthorized'
        '403':
          $ref: '#/components/responses/Forbidden'
        '404':
          $ref: '#/components/responses/NotFound'

components:
  securitySchemes:
    bearerAuth:
      type: http
      scheme: bearer
      bearerFormat: JWT
  schemas:
    MeResponse:
      type: object
      properties:
        app_name/roles:
          type: array
          items:
            type: string
          description: Custom claim containing assigned roles.
        iss:
          type: string
          description: Issuer identifier for the JWT.
          example: https://domain.com/
        sub:
          type: string
          description: Unique subject (user) identifier.
          example: auth0|6915a0beed*******
        aud:
          type: array
          items:
            type: string
          description: Audience values for which this token is intended.
        iat:
          type: integer
          format: int64
          description: Issued-at timestamp (Unix).
        exp:
          type: integer
          format: int64
          description: Expiration timestamp (Unix).
        scope:
          type: string
          description: OAuth scopes included in the token.
        azp:
          type: string
          description: Authorized party (client ID).
        permissions:
          type: array
          description: Permissions assigned to the user.
          items:
            type: string
    DesignationEnum:
      type: string
      enum:
        - ADMIN
        - MANAGER
        - EMPLOYEE
        - INTERN
    # Auth Schemas
    AuthLoginRequest:
      type: object
      required: [username, password]
      properties:
        username:
          type: string
        password:
          type: string
    AuthTokens:
      type: object
      properties:
        accessToken:
          type: string
        refreshToken:
          type: string
    # Roles
    RoleData:
      type: object
      properties:
        id:
          type: string
        role:
          type: string
        name:
          type: string
      required: [id, role]
    RoleDTO:
      type: object
      properties:
        role:
          type: string
        name:
          type: string
      required: [role]
    RoleUpdateDTO:
      type: object
      properties:
        role:
          type: string
        name:
          type: string
    # Users
    UserData:
      type: object
      properties:
        id:
          type: string
        email:
          type: string
          format: email
        fullName:
          type: string
        auth0_role:
          type: string
        auth0_user_id:
          type: string
        designation:
          $ref: '#/components/schemas/DesignationEnum'
        created_at:
          type: string
        updatedAt:
          type: string
      required: [id, email, username]
    UserDTO:
      type: object
      required: [email, password, designation, fullName]
      properties:
        email:
          type: string
          format: email
        password:
          type: string
        username:
          type: string
        fullName:
          type: string
        designation:
          $ref: '#/components/schemas/DesignationEnum'
        role:
          type: string
    UserUpdateDTO:
      $ref: '#/components/schemas/UserDTO'
    # Student
    Student:
      type: object
      properties:
        id:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        enrolmentDate:
          type: string
          format: date
        status:
          type: string
          default: 'ACTIVE'
        session:
          type: string
          default: 2021-22
        graduationYear:
          type: integer
          default: 2026
        currentSemesterId:
          type: string
          format: uuid

      required:
        - id
        - userId
        - status
        - session
        - currentSemesterId
    StudentCreateDTO:
      type: object
      required:
        - email
        - password
        - fullName
        - session
        - designation
        - enrolmentDate
        - currentSemesterId
      properties:
        email:
          type: string
          format: email
        fullName:
          type: string
        password:
          type: string
          minLength: 6
        enrolmentDate:
          type: string
          format: date-time
        status:
          type: string
          enum:
            - ACTIVE
            - INACTIVE
            - SUSPENDED
            - GRADUATED
          nullable: true
        session:
          type: string
          nullable: true
        graduationYear:
          type: integer
          format: int32
          nullable: true
        currentSemesterId:
          type: string
          format: uuid
          description: Current Semester Id must be valid!
    StudentUpdateDTO:
      type: object
      required:
        - fullName
        - enrolmentDate
        - currentSemesterId
      properties:
        fullName:
          type: string
        enrolmentDate:
          type: string
          format: date-time
        status:
          type: string
          enum:
            - ACTIVE
            - INACTIVE
            - SUSPENDED
            - GRADUATED
            # Add all values from StudentStatus enum
          nullable: true
        session:
          type: string
          nullable: true
        graduationYear:
          type: integer
          format: int32
          nullable: true
        currentSemesterId:
          type: string
          format: uuid
          description: Current Semester Id must be valid!
    # Teacher
    Teacher:
      type: object
      properties:
        id:
          type: string
          format: uuid
        userId:
          type: string
          format: uuid
        designation:
          allOf:
            - $ref: '#/components/schemas/DesignationEnum'
            - default: 'junior_instructor'
        joinDate:
          type: string
          format: date
        officeLocation:
          type: string
          default: COM-201
      required: [id, userId]
    TeacherCreateDTO:
      type: object
      required:
        - email
        - fullName
        - password
        - designation
        - joinDate
        - officeLocation
      properties:
        email:
          type: string
          format: email
          default: John.doe.1@gmail.com
        fullName:
          type: string
          default: John Doe
        password:
          type: string
          minLength: 6
          default: P@ssw0rd!
        designation:
          allOf:
            - $ref: '#/components/schemas/DesignationEnum'
            - default: junior_instructor
        joinDate:
          type: string
          format: date
        officeLocation:
          type: string
          default: COM-201
    TeacherUpdateDTO:
      type: object
      properties:
        fullName:
          type: string
          default: John Doe
        designation:
          allOf:
            - $ref: '#/components/schemas/DesignationEnum'
            - default: junior_instructor
        joinDate:
          type: string
          format: date
        officeLocation:
          type: string
          default: COM-201
    # Semester
    Semester:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
      required: [id, name]
    SemesterCreateDTO:
      type: object
      required: [name]
      properties:
        name:
          type: string
    # Courses
    Courses:
      type: object
      properties:
        id:
          type: string
          format: uuid
        semesterId:
          type: string
          format: uuid
        code:
          type: string
          default: 2999
        name:
          type: string
          default: Introduction to Computer Science
        description:
          type: string
          description: Basic concepts of computing
        credits:
          type: integer
          format: int32
          default: 3
      required: [id, code, name]
    CourseCreateDTO:
      type: object
      required: [code, name, credits, semesterId]
      properties:
        semesterId:
          type: integer
        code:
          type: string
        name:
          type: string
        description:
          type: string
        credits:
          type: integer
    CourseUpdateDTO:
      type: object
      properties:
        semesterId:
          type: string
          format: uuid
        code:
          type: string
        name:
          type: string
        description:
          type: string
        credits:
          type: integer
    # Course Schedule
    CourseSchedule:
      type: object
      properties:
        id:
          type: string
          format: uuid
        courseId:
          type: string
          format: uuid
        dayOfWeek:
          type: string
          default: MONDAY
        startTime:
          type: string
          format: date
          description: time in HH:MM:SS
        endTime:
          type: string
          format: date
          description: time in HH:MM:SS
        room:
          type: string
          default: COM-201
        teacherId:
          type: string
          format: uuid
      required:
        - id
        - courseId
        - dayOfWeek
        - startTime
        - endTime
        - room
    CourseScheduleCreateDTO:
      type: object
      required:
        - courseId
        - dayOfWeek
        - startTime
        - endTime
        - room
      properties:
        courseId:
          type: string
          format: uuid
        dayOfWeek:
          type: string
          default: MONDAY
        startTime:
          type: string
          format: date
          description: time in HH:MM:SS
        endTime:
          type: string
          format: date
          description: time in HH:MM:SS
        room:
          type: string
          default: COM-201
        teacherId:
          type: string
          format: uuid
    CourseScheduleUpdateDTO:
      type: object
      properties:
        courseId:
          type: string
          format: uuid
        dayOfWeek:
          type: string
          default: MONDAY
        startTime:
          type: string
          format: date
          description: time in HH:MM:SS
        endTime:
          type: string
          format: date
          description: time in HH:MM:SS
        room:
          type: string
          default: COM-201
        teacherId:
          type: string
          format: uuid
    # Attendance
    AttendanceRecord:
      type: object
      properties:
        id:
          type: string
          format: uuid
        studentId:
          type: string
          format: uuid
        date:
          type: string
          format: date
        status:
          type: string
          default: PRESENT
        checkInTime:
          type: string
          default: 10:00
        checkOutTime:
          type: string
          default: 10:30
        notes:
          type: string
          default: Note goes here
        courseId:
          type: string
          format: uuid
        recordedBy:
          type: string
          format: uuid
    AttendanceCreateDTO:
      type: object
      required: [studentId, date, courseId]
      properties:
        studentId:
          type: string
          format: uuid
        date:
          type: string
          format: date
        status:
          type: string
          default: PRESENT
        checkInTime:
          type: string
          default: 10:00
        checkOutTime:
          type: string
          default: 10:30
        notes:
          type: string
          default: Everything good
        courseScheduleId:
          type: string
          format: uuid
    AttendanceUpdateDTO:
      type: object
      properties:
        status:
          type: string
          default: PRESENT
        checkInTime:
          type: string
          default: 10:00
        checkOutTime:
          type: string
          default: 10:30
        notes:
          type: string
          default: Everything good
    # Activities
    Activity:
      type: object
      properties:
        id:
          type: string
          format: uuid
        activityType:
          type: string
          default: Notice board
        description:
          type: string
          default: description
        relatedEntityType:
          type: string
          default: entity type
        relatedEntityId:
          type: string
          format: uuid
        leadId:
          type: string
          format: uuid
        createdAt:
          type: string
          format: date
        updatedAt:
          type: string
          format: date
      required: [id, activityType]
    ActivityCreateDTO:
      type: object
      required: [activityType]
      properties:
        activityType:
          type: string
          default: meeting
        description:
          type: string
          default: description
        relatedEntityType:
          type: string
          default: entity type
        relatedEntityId:
          type: string
          format: uuid
        leadId:
          type: string
          format: uuid
    ActivityUpdateDTO:
      type: object
      required: [activityType]
      properties:
        activityType:
          type: string
          default: meeting
        description:
          type: string
          default: description
        relatedEntityType:
          type: string
          default: entity type
        relatedEntityId:
          type: string
          format: uuid
        leadId:
          type: string
          format: uuid

    # Notices
    Notice:
      type: object
      properties:
        id:
          type: string
          format: uuid
        createdById:
          type: string
          format: uuid
        text:
          type: string
          default: Back to class
        attachment:
          type: string
          default: https://images.pexels.com/photos/32802440/pexels-photo-32802440.jpeg
          nullable: true
      required: [id, createdBy, text]
    NoticeCreateDTO:
      type: object
      required: [text]
      properties:
        text:
          type: string
          default: Back to class
        attachment:
          type: string
          nullable: true
    NoticeUpdateDTO:
      type: object
      properties:
        text:
          type: string
        attachment:
          type: string
          nullable: true
    # Reports
    ReportTypeEnum:
      type: string
      description: Defines the specific category or type of the report being generated or requested.
      enum:
        - ANALYTICS
        - PERFORMANCE
        - ACTIVITY
        - SALES
        - FINANCIAL
        - USER
        - SYSTEM
        - ERROR
        - EXPORT
        - CUSTOM
    Report:
      type: object
      properties:
        id:
          type: string
          format: uuid
        title:
          type: string
          default: December 2025 Attendance Report
        description:
          type: string
          default: December 2025 Attendance Report
        type:
          $ref: '#/components/schemas/ReportTypeEnum'
        generatedAt:
          type: string
          format: date-time
        filePath:
          type: string
          default: https://www.pexels.com/photo/charming-rustic-house-in-provence-france-32802440/
        parameters:
          type: string
          default: '{
            \"courseId\":\"course-1\",
            \"from\":\"2024-01-01\",
            \"to\":\"2024-06-30\",
            }'
        generatedById:
          type: string
          format: uuid

    ReportCreateDTO:
      type: object
      required: [title, type]
      properties:
        title:
          type: string
          default: December 2025 Attendance Report
        description:
          type: string
          default: December 2025 Attendance Report
        type:
          $ref: '#/components/schemas/ReportTypeEnum'
        parameters:
          type: string
          default: ''
  examples: {}
  responses:
    BadRequest:
      description: Bad Request
      content:
        application/json:
          example:
            code: 400
            message: Bad Request
            fields:
              - field: field1
                values:
                  - field1 cannot be empty.
                  - field1 cannot be empty.

              - field: field2
                values:
                  - field2 must be at least 8 characters long.
                  - field2 must be at least 8 characters long.
    Unauthorized:
      description: Unauthorized
      content:
        application/json:
          example:
            code: 401
            statusCode: Unauthorized

    Forbidden:
      description: Forbidden
      content:
        application/json:
          example:
            statusCode: 403
            message: Forbidden resource
            error: Forbidden
    NotFound:
      description: Not Found
      content:
        application/json:
          example:
            statusCode: 404
            message: 'Not found!'
            error: 'Not found!'
    InternalServerError:
      description: Internal Server Error
      content:
        application/json:
          example:
            statusCode: 404
            message: 'Internal Server Error'
            error: 'Internal Server Error'
  parameters:
    LimitParam:
      name: limit
      in: query
      description: Number of items to return
      required: false
      schema:
        type: integer
        minimum: 0
        default: 10

    OffsetParam:
      name: offset
      in: query
      description: Number of items to skip
      required: false
      schema:
        type: integer
        minimum: 0
        default: 0
